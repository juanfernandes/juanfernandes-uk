var columns; var drops; var drawnToBottom; var canvas = document.getElementById('matrix'); var ctx = canvas.getContext('2d'); var fontSize = 18; var chars = generateChars(); function generateChars () { for (var t = '0123456789', n = 0; n <= 55; n++)t += String.fromCharCode(n + 65382); return t.split('') } function initCanvas () { canvas.width = window.innerWidth, canvas.height = window.innerHeight, columns = Math.round(canvas.width / fontSize), drops = []; for (var t = 0; t < columns; t++)drops[t] = 1; drawnToBottom = !1 } function draw () { ctx.fillStyle = 'rgba(0, 0, 0, 0.05)', ctx.fillRect(0, 0, canvas.width, canvas.height), ctx.fillStyle = '#19FF19', ctx.font = 'bold ' + fontSize + 'px monospace'; for (var t = drops.length, n = chars.length, o = 0; o < t; o++) { var a = chars[Math.floor(Math.random() * n)]; var r = drops[o] * fontSize; ctx.fillText(a, o * fontSize, r), r > canvas.height && (drawnToBottom = !0), (!drawnToBottom && Math.random() > 0.925 || drawnToBottom && Math.random() > 0.95) && (drops[o] = 0), drops[o]++ } }window.onresize = function () { initCanvas() }, initCanvas(), setInterval(draw, 45)
